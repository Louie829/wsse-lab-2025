openapi: 3.0.3
info:
  title: Students API
  version: 1.0.0
  description: |
    A minimal Students API for practicing API contracts.
    Includes:
    - GET /students
    - POST /students (201 + Location header)

servers:
  - url: https://api.example.com
    description: Example production server (for contract only)

paths:
  /students:
    get:
      summary: List students
      description: Return a list of students.
      responses:
        '200':
          description: A JSON array of students.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Student'
    post:
      summary: Create a new student
      description: Create a student and return 201 Created with Location header.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudentCreate'
      responses:
        '201':
          description: Student created.
          headers:
            Location:
              description: URL of the newly created student resource.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '400':
          description: Invalid input.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    Student:
      type: object
      description: A student with an id and basic information.
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: Alice
        email:
          type: string
          format: email
          example: alice@example.com
        enrolledAt:
          type: string
          format: date-time
          example: 2025-01-01T08:00:00Z
      required:
        - id
        - name
        - email

    StudentCreate:
      type: object
      description: Data required to create a student (no id).
      properties:
        name:
          type: string
          example: Alice
        email:
          type: string
          format: email
          example: alice@example.com
      required:
        - name
        - email

    Error:
      type: object
      description: Error response.
      properties:
        code:
          type: string
          example: BAD_REQUEST
        message:
          type: string
          example: Invalid email format.
      required:
        - code
        - message
